// const PRODUCTS = [{
//     nombre: "Salomon Outdoor Alphacross Blast Hombre",
//     marca: "salomon",
//     precio: 47999,
//     descripcion: "La zapatilla salomon alphacross blast es un modelo sencillo, ideal para entrenamientos ocasionales de trail running o para correr en el parque pues te brinda gran comodidad, buen ajuste, agarre y suavidad. El zapato todo terreno que te lleva a emocionantes aventuras al aire libre.",
//     img: "https://s3.sa-east-1.amazonaws.com/www.vaypol.com.ar/variants/jh8b503au08hlhp2kol86rgghen9/c77c2a06864ac9aca38dc5bd9371de015471edcdbf322dfb14411689bf968ae5",
//     stock: 13,
// },
// {
//     nombre: "Botines adidas Predator Mutator 2.0 Terreno Firme",
//     marca: "adidas",
//     precio: 117499,
//     descripcion: "Las puntas de caucho en el empeine se adhieren a la pelota para hacer jugadas con seguridad. La suela dividida te ayuda a controlar el partido en terreno firme.",
//     img: "https://s3.sa-east-1.amazonaws.com/www.vaypol.com.ar/variants/l3yuk2k274t66ek0rp2cktoeimh7/c77c2a06864ac9aca38dc5bd9371de015471edcdbf322dfb14411689bf968ae5",
//     stock: 20,
// },
// {
//     nombre: "Zapatillas Puma Ferrari R Cat Machina Adp",
//     marca: "puma",
//     precio: 37699,
//     descripcion: "Combina moda y velocidad con zapatillas ferrari r-cat machina. Su capellada de materiales sintéticos es duradera y aporta un look moderno y urbano para recorrer las calles de tu ciudad. Para mejorar la tracción cuenta con una suela de caucho y sus logos de la scuderia ferrari se combinan con los de la marca para darte un estilo original que se robará todas las miradas.",
//     img: "https://s3.sa-east-1.amazonaws.com/www.vaypol.com.ar/variants/mrxsb6xe8mfxu042bervswf114o9/c77c2a06864ac9aca38dc5bd9371de015471edcdbf322dfb14411689bf968ae5",
//     stock: 6,
// },
// {
//     nombre: "Zapatillas adidas Zone Dox 1.9 S",
//     marca: "adidas",
//     precio: 58999,
//     descripcion: "Estas zapatillas de hockey tienen una estructura sprintframe que aporta una gran estabilidad incluso a gran velocidad. La parte superior de malla incluye un calcetín interior elástico que te ofrece el ajuste de un guante. Las bandas de tela en la zona del tobillo proporcionan más sujeción y la puntera de tpu ayuda a proteger el pie de los impactos.",
//     img: "https://s3.sa-east-1.amazonaws.com/www.vaypol.com.ar/variants/gq26zonz2zxmcg6i5eg7yl2qpcpf/c77c2a06864ac9aca38dc5bd9371de015471edcdbf322dfb14411689bf968ae5",
//     stock: 8,
// },
// {
//     nombre: "Zapatillas adidas Barricade Parley",
//     marca: "adidas",
//     precio: 76999,
//     descripcion: "Jugá para los océanos. Parte de una colección creada para el torneo de canchas de césped más famoso del mundo, estas zapatillas barricade para jugar tenis ponen todas las miradas en los residuos plásticos. Diseñadas para controlar la cancha, ofrecen un ajuste firme gracias a su sistema de amarre adaptable y los sensepods de espuma. La tecnología torsion system ofrece una total estabilidad en cada deslizamiento y movimiento, mientras que la mediasuela bounce amortigua los aterrizajes.",
//     img: "https://s3.sa-east-1.amazonaws.com/www.vaypol.com.ar/variants/a9zbgsfxwasxo1i1gsy7spdxfc7x/c77c2a06864ac9aca38dc5bd9371de015471edcdbf322dfb14411689bf968ae5",
//     stock: 5,
// },
// {
//     nombre: "Zapatillas Wilson Slice 2",
//     marca: "wilson",
//     precio: 32399,
//     descripcion: "Diseñado para brindar comodidad y durabilidad, este calzado está construido con eva de alta densidad para un rendimiento y una durabilidad superiores, combinando comodidad y estabilidad con seguridad para el jugador moderno. Diseñado para todo tipo de pistas. Detalle de cierre de cordones convencional, lengüeta de malla suave para mayor comodidad, plantilla extraíble, puntera reforzada, orificios frontales para una mejor transpirabilidad y diseño moderno.",
//     img: "https://s3.sa-east-1.amazonaws.com/www.vaypol.com.ar/variants/rxj3bbqafrtsou7zjvgyz4uec4sg/c77c2a06864ac9aca38dc5bd9371de015471edcdbf322dfb14411689bf968ae5",
//     stock: 10,
// },
// {
//     nombre: "Zapatillas Grays Shoe Cage AST",
//     marca: "grays",
//     precio: 45499,
//     descripcion: "Sonic fit collar system: proporciona un sistema de soporte y amortiguación interno y reduce la cantidad de agua que puede penetrar en el zapato en superficies a base de agua. Cuenta con una suela exterior innovadora, duradera y flexible diseñada para ofrecer una tracción y un agarre excepcionales, especialmente en superficies a base de agua. Tacos rígidos de tpu brindan un agarre excepcional en la superficie sintética, lo que permite giros más rápidos y cerrados. Tacos ahuecados reducen el peso de la suela pero absorben el fuerte impacto de las superficies sintéticas. Gel zone pp: atenúa el impacto durante las fases de impacto y permite el movimiento en varios planos a medida que el pie pasa por el ciclo de la marcha. Estabilidad a la torsión - micro-light carbon eps carbon unidad de estabilización técnica integrada en la entresuela de eva para mantener la estabilidad torsional de la zapatilla. El material de la entresuela gpor eva de 80 grados proporciona una sensación de plataforma más estable pero extremadamente acolchada. Interno: el conjunto de compresión de la plantilla haipoli es inferior al 5% con el tiempo, por lo que la amortiguación y el ajuste nunca cambian dentro del zapato, lo que brinda la máxima comodidad. Ajuste superior del talón. El contrafuerte de tpu integrado proporciona estabilidad y un ajuste seguro que reduce el movimiento lateral en el área del talón, combinado con espuma viscoelástica ultra suave para un ajuste único. Horma dinámica de perfil bajo.",
//     img: "https://s3.sa-east-1.amazonaws.com/www.vaypol.com.ar/variants/jotk7ndg65titapuat61j23of6xg/c77c2a06864ac9aca38dc5bd9371de015471edcdbf322dfb14411689bf968ae5",
//     stock: 7,
// },
// {
//     nombre: "Zapatillas Puma Bmw Mms Driff Cat 5 Ultra Ii",
//     marca: "puma",
//     precio: 35999,
//     descripcion: "Las drift cat 5 ultra ii están inspiradas en la estructura orgánica 3d y el movimiento dinámico del diseño de automovilismo de alto rendimiento para lograr unas zapatillas verdaderamente revolucionarias. Posee un empeine de cuero sintético perforado para mayor transpirabilidad.",
//     img: "https://s3.sa-east-1.amazonaws.com/www.vaypol.com.ar/variants/5vcgxcjytcjjpfzvvob7bofhk76z/c77c2a06864ac9aca38dc5bd9371de015471edcdbf322dfb14411689bf968ae5",
//     stock: 15,
// },
// {
//     nombre: "Botines Puma Future 5.1 Netfit",
//     marca: "puma",
//     precio: 94699,
//     descripcion: "Los botines  future 5.1 netfit son tus aliados a la hora de mantenerte rápido y con swing en la cancha. Con tecnología de cordones netfit que te permite personalizar el ajuste y una suela exterior ultrarreactiva y ligera rapidagility que proporciona una tracción duradera y soporta fuertes golpes de velocidad. Cuentan con una parte superior tejida de agarre texturizado en las zonas de impacto clave. Ideales para usar en superficies naturales firmes y césped artificial.",
//     img: "https://s3.sa-east-1.amazonaws.com/www.vaypol.com.ar/variants/fqweyroxcfkqe2uwgibt5rw16zem/c77c2a06864ac9aca38dc5bd9371de015471edcdbf322dfb14411689bf968ae5",
//     stock: 12,
// },
// ];

import { collection, getDocs, addDoc, getDoc, doc, where, query, writeBatch, increment } from "firebase/firestore";
import { db } from "./config";

const productsRef = collection(db, "items");

export const getProductos = async (marca) => {
    const q = marca ? query (productsRef, where("marca", "==", marca)) : productsRef;

    let products = [];
    const querySnapshot = await getDocs(q);
    querySnapshot.forEach((doc) => {
        products = [...products, {...doc.data(), id: doc.id}]
    });
    return products;
};

export const getProducto = async (id) => {
    const document = doc(db, "items", id);
    const docSnap = await getDoc(document);

    if(docSnap.exists()) return { id: docSnap.id, ...docSnap.data()};

    return null;
};

export const updateProducto = async (id, item) => {
    const newProducto = await updateProducto(doc(db, "items", id), item);
    return; 
};


export const deleteProducto = async (id) => {
    return await deleteProducto(doc(db, "items", id));
};


export const updateManyProducts = async (items) => {
    const batch = writeBatch(db);
    items.forEach(({id, qty}) => {
        batch.update(doc(db, "items", id), {
            stock: increment(-qty)
        })
    });
    batch.commit();
};

// export const cargarDatos = async() => {
//     PRODUCTS.forEach(async (producto) => {
//         await addDoc (productsRef, producto)
//     })
// }